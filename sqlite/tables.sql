DROP TABLE IF EXISTS elu;
DROP TABLE IF EXISTS categorized;
DROP TABLE IF EXISTS errors;
DROP TABLE IF EXISTS converted;
DROP TABLE IF EXISTS ignoredimages;
DROP TABLE IF EXISTS multimedia;
DROP TABLE IF EXISTS occurrence;
DROP TABLE IF EXISTS observations;
DROP TABLE IF EXISTS geo_kg;
DROP TABLE IF EXISTS geo_gelu;
DROP TABLE IF EXISTS elu_values;

CREATE TABLE elu(eluid INTEGER, count INTEGER, red INTEGER, green INTEGER, blue INTEGER, classname VARCHAR COLLATE NOCASE);
CREATE TABLE categorized(gbifid BIGINT, imgid INTEGER, category VARCHAR COLLATE NOCASE, confidence FLOAT);
CREATE TABLE errors(errorCode VARCHAR COLLATE NOCASE, gbifid BIGINT, imgid INTEGER);
CREATE TABLE converted(gbifid BIGINT, imgid INTEGER);
CREATE TABLE ignoredimages(gbifid BIGINT, imgid INTEGER, reason VARCHAR COLLATE NOCASE);
CREATE TABLE multimedia(imgid INTEGER, gbifid BIGINT, _type VARCHAR COLLATE NOCASE, format VARCHAR COLLATE NOCASE, identifier VARCHAR COLLATE NOCASE, _references VARCHAR COLLATE NOCASE, title VARCHAR COLLATE NOCASE, description VARCHAR COLLATE NOCASE, source VARCHAR COLLATE NOCASE, audience VARCHAR COLLATE NOCASE, created VARCHAR COLLATE NOCASE, creator VARCHAR COLLATE NOCASE, contributor VARCHAR COLLATE NOCASE, publisher VARCHAR COLLATE NOCASE, license VARCHAR COLLATE NOCASE, rightsholder VARCHAR COLLATE NOCASE);
CREATE TABLE occurrence(gbifid BIGINT, abstract VARCHAR COLLATE NOCASE, accessrights VARCHAR COLLATE NOCASE, accrualmethod VARCHAR COLLATE NOCASE, accrualperiodicity VARCHAR COLLATE NOCASE, accrualpolicy VARCHAR COLLATE NOCASE, alternative VARCHAR COLLATE NOCASE, audience VARCHAR COLLATE NOCASE, available VARCHAR COLLATE NOCASE, bibliographiccitation VARCHAR COLLATE NOCASE, conformsto VARCHAR COLLATE NOCASE, contributor VARCHAR COLLATE NOCASE, coverage VARCHAR COLLATE NOCASE, created VARCHAR COLLATE NOCASE, creator VARCHAR COLLATE NOCASE, date VARCHAR COLLATE NOCASE, dateaccepted VARCHAR COLLATE NOCASE, datecopyrighted VARCHAR COLLATE NOCASE, datesubmitted VARCHAR COLLATE NOCASE, description VARCHAR COLLATE NOCASE, educationlevel VARCHAR COLLATE NOCASE, extent VARCHAR COLLATE NOCASE, format VARCHAR COLLATE NOCASE, hasformat VARCHAR COLLATE NOCASE, haspart VARCHAR COLLATE NOCASE, hasversion VARCHAR COLLATE NOCASE, identifier VARCHAR COLLATE NOCASE, instructionalmethod VARCHAR COLLATE NOCASE, isformatof VARCHAR COLLATE NOCASE, ispartof VARCHAR COLLATE NOCASE, isreferencedby VARCHAR COLLATE NOCASE, isreplacedby VARCHAR COLLATE NOCASE, isrequiredby VARCHAR COLLATE NOCASE, isversionof VARCHAR COLLATE NOCASE, issued VARCHAR COLLATE NOCASE, _language VARCHAR COLLATE NOCASE, license VARCHAR COLLATE NOCASE, mediator VARCHAR COLLATE NOCASE, medium VARCHAR COLLATE NOCASE, modified TIMESTAMP, provenance VARCHAR COLLATE NOCASE, publisher VARCHAR COLLATE NOCASE, _references VARCHAR COLLATE NOCASE, relation VARCHAR COLLATE NOCASE, replaces VARCHAR COLLATE NOCASE, requires VARCHAR COLLATE NOCASE, rights VARCHAR COLLATE NOCASE, rightsholder VARCHAR COLLATE NOCASE, source VARCHAR COLLATE NOCASE, spatial VARCHAR COLLATE NOCASE, subject VARCHAR COLLATE NOCASE, tableofcontents VARCHAR COLLATE NOCASE, temporal VARCHAR COLLATE NOCASE, title VARCHAR COLLATE NOCASE, _type VARCHAR COLLATE NOCASE, _valid VARCHAR COLLATE NOCASE, institutionid VARCHAR COLLATE NOCASE, collectionid VARCHAR COLLATE NOCASE, datasetid VARCHAR COLLATE NOCASE, institutioncode VARCHAR COLLATE NOCASE, collectioncode VARCHAR COLLATE NOCASE, datasetname VARCHAR COLLATE NOCASE, ownerinstitutioncode VARCHAR COLLATE NOCASE, basisofrecord VARCHAR COLLATE NOCASE, informationwithheld VARCHAR COLLATE NOCASE, datageneralizations VARCHAR COLLATE NOCASE, dynamicproperties VARCHAR COLLATE NOCASE, occurrenceid VARCHAR COLLATE NOCASE, catalognumber VARCHAR COLLATE NOCASE, recordnumber VARCHAR COLLATE NOCASE, recordedby VARCHAR COLLATE NOCASE, recordedbyid VARCHAR COLLATE NOCASE, individualcount INTEGER, organismquantity DOUBLE, organismquantitytype VARCHAR COLLATE NOCASE, sex VARCHAR COLLATE NOCASE, lifestage VARCHAR COLLATE NOCASE, reproductivecondition VARCHAR COLLATE NOCASE, behavior VARCHAR COLLATE NOCASE, establishmentmeans VARCHAR COLLATE NOCASE, degreeofestablishment VARCHAR COLLATE NOCASE, pathway VARCHAR COLLATE NOCASE, georeferenceverificationstatus VARCHAR COLLATE NOCASE, occurrencestatus VARCHAR COLLATE NOCASE, preparations VARCHAR COLLATE NOCASE, disposition VARCHAR COLLATE NOCASE, associatedoccurrences VARCHAR COLLATE NOCASE, associatedreferences VARCHAR COLLATE NOCASE, associatedsequences VARCHAR COLLATE NOCASE, associatedtaxa VARCHAR COLLATE NOCASE, othercatalognumbers VARCHAR COLLATE NOCASE, occurrenceremarks VARCHAR COLLATE NOCASE, organismid VARCHAR COLLATE NOCASE, organismname VARCHAR COLLATE NOCASE, organismscope VARCHAR COLLATE NOCASE, associatedorganisms VARCHAR COLLATE NOCASE, previousidentifications VARCHAR COLLATE NOCASE, organismremarks VARCHAR COLLATE NOCASE, materialsampleid VARCHAR COLLATE NOCASE, eventid VARCHAR COLLATE NOCASE, parenteventid VARCHAR COLLATE NOCASE, fieldnumber VARCHAR COLLATE NOCASE, eventdate TIMESTAMP, eventtime VARCHAR COLLATE NOCASE, startdayofyear INTEGER, enddayofyear INTEGER, _year INTEGER, _month INTEGER, _day INTEGER, verbatimeventdate VARCHAR COLLATE NOCASE, habitat VARCHAR COLLATE NOCASE, samplingprotocol VARCHAR COLLATE NOCASE, samplesizevalue DOUBLE, samplesizeunit VARCHAR COLLATE NOCASE, samplingeffort VARCHAR COLLATE NOCASE, fieldnotes VARCHAR COLLATE NOCASE, eventremarks VARCHAR COLLATE NOCASE, locationid VARCHAR COLLATE NOCASE, highergeographyid VARCHAR COLLATE NOCASE, highergeography VARCHAR COLLATE NOCASE, continent VARCHAR COLLATE NOCASE, waterbody VARCHAR COLLATE NOCASE, islandgroup VARCHAR COLLATE NOCASE, island VARCHAR COLLATE NOCASE, countrycode VARCHAR COLLATE NOCASE, stateprovince VARCHAR COLLATE NOCASE, county VARCHAR COLLATE NOCASE, municipality VARCHAR COLLATE NOCASE, locality VARCHAR COLLATE NOCASE, verbatimlocality VARCHAR COLLATE NOCASE, verbatimelevation VARCHAR COLLATE NOCASE, verticaldatum VARCHAR COLLATE NOCASE, verbatimdepth VARCHAR COLLATE NOCASE, minimumdistanceabovesurfaceinmeters VARCHAR COLLATE NOCASE, maximumdistanceabovesurfaceinmeters VARCHAR COLLATE NOCASE, locationaccordingto VARCHAR COLLATE NOCASE, locationremarks VARCHAR COLLATE NOCASE, decimallatitude DOUBLE, decimallongitude DOUBLE, coordinateuncertaintyinmeters DOUBLE, coordinateprecision DOUBLE, pointradiusspatialfit VARCHAR COLLATE NOCASE, verbatimcoordinatesystem VARCHAR COLLATE NOCASE, verbatimsrs VARCHAR COLLATE NOCASE, footprintwkt VARCHAR COLLATE NOCASE, footprintsrs VARCHAR COLLATE NOCASE, footprintspatialfit VARCHAR COLLATE NOCASE, georeferencedby VARCHAR COLLATE NOCASE, georeferenceddate VARCHAR COLLATE NOCASE, georeferenceprotocol VARCHAR COLLATE NOCASE, georeferencesources VARCHAR COLLATE NOCASE, georeferenceremarks VARCHAR COLLATE NOCASE, geologicalcontextid VARCHAR COLLATE NOCASE, earliesteonorlowesteonothem VARCHAR COLLATE NOCASE, latesteonorhighesteonothem VARCHAR COLLATE NOCASE, earliesteraorlowesterathem VARCHAR COLLATE NOCASE, latesteraorhighesterathem VARCHAR COLLATE NOCASE, earliestperiodorlowestsystem VARCHAR COLLATE NOCASE, latestperiodorhighestsystem VARCHAR COLLATE NOCASE, earliestepochorlowestseries VARCHAR COLLATE NOCASE, latestepochorhighestseries VARCHAR COLLATE NOCASE, earliestageorloweststage VARCHAR COLLATE NOCASE, latestageorhigheststage VARCHAR COLLATE NOCASE, lowestbiostratigraphiczone VARCHAR COLLATE NOCASE, highestbiostratigraphiczone VARCHAR COLLATE NOCASE, lithostratigraphicterms VARCHAR COLLATE NOCASE, _group VARCHAR COLLATE NOCASE, formation VARCHAR COLLATE NOCASE, member VARCHAR COLLATE NOCASE, bed VARCHAR COLLATE NOCASE, identificationid VARCHAR COLLATE NOCASE, verbatimidentification VARCHAR COLLATE NOCASE, identificationqualifier VARCHAR COLLATE NOCASE, typestatus VARCHAR COLLATE NOCASE, identifiedby VARCHAR COLLATE NOCASE, identifiedbyid VARCHAR COLLATE NOCASE, dateidentified TIMESTAMP, identificationreferences VARCHAR COLLATE NOCASE, identificationverificationstatus VARCHAR COLLATE NOCASE, identificationremarks VARCHAR COLLATE NOCASE, taxonid VARCHAR COLLATE NOCASE, scientificnameid VARCHAR COLLATE NOCASE, acceptednameusageid INTEGER, parentnameusageid VARCHAR COLLATE NOCASE, originalnameusageid VARCHAR COLLATE NOCASE, nameaccordingtoid VARCHAR COLLATE NOCASE, namepublishedinid INTEGER, taxonconceptid VARCHAR COLLATE NOCASE, scientificname VARCHAR COLLATE NOCASE, acceptednameusage VARCHAR COLLATE NOCASE, parentnameusage VARCHAR COLLATE NOCASE, originalnameusage VARCHAR COLLATE NOCASE, nameaccordingto VARCHAR COLLATE NOCASE, namepublishedin VARCHAR COLLATE NOCASE, namepublishedinyear INTEGER, higherclassification VARCHAR COLLATE NOCASE, kingdom VARCHAR COLLATE NOCASE, phylum VARCHAR COLLATE NOCASE, _class VARCHAR COLLATE NOCASE, _order VARCHAR COLLATE NOCASE, _family VARCHAR COLLATE NOCASE, subfamily VARCHAR COLLATE NOCASE, genus VARCHAR COLLATE NOCASE, genericname VARCHAR COLLATE NOCASE, subgenus VARCHAR COLLATE NOCASE, infragenericepithet VARCHAR COLLATE NOCASE, specificepithet VARCHAR COLLATE NOCASE, infraspecificepithet VARCHAR COLLATE NOCASE, cultivarepithet VARCHAR COLLATE NOCASE, taxonrank VARCHAR COLLATE NOCASE, verbatimtaxonrank VARCHAR COLLATE NOCASE, vernacularname VARCHAR COLLATE NOCASE, nomenclaturalcode VARCHAR COLLATE NOCASE, taxonomicstatus VARCHAR COLLATE NOCASE, nomenclaturalstatus VARCHAR COLLATE NOCASE, taxonremarks VARCHAR COLLATE NOCASE, datasetkey VARCHAR COLLATE NOCASE, publishingcountry VARCHAR COLLATE NOCASE, lastinterpreted TIMESTAMP, elevation DOUBLE, elevationaccuracy DOUBLE, depth DOUBLE, depthaccuracy DOUBLE, distanceabovesurface VARCHAR COLLATE NOCASE, distanceabovesurfaceaccuracy VARCHAR COLLATE NOCASE, issue VARCHAR COLLATE NOCASE, mediatype VARCHAR COLLATE NOCASE, hascoordinate BOOLEAN, hasgeospatialissues BOOLEAN, taxonkey INTEGER, acceptedtaxonkey INTEGER, kingdomkey INTEGER, phylumkey INTEGER, classkey INTEGER, orderkey INTEGER, familykey INTEGER, genuskey INTEGER, subgenuskey VARCHAR COLLATE NOCASE, specieskey INTEGER, species VARCHAR COLLATE NOCASE, acceptedscientificname VARCHAR COLLATE NOCASE, verbatimscientificname VARCHAR COLLATE NOCASE, typifiedname VARCHAR COLLATE NOCASE, protocol VARCHAR COLLATE NOCASE, lastparsed TIMESTAMP, lastcrawled TIMESTAMP, repatriated BOOLEAN, relativeorganismquantity VARCHAR COLLATE NOCASE, level0gid VARCHAR COLLATE NOCASE, level0name VARCHAR COLLATE NOCASE, level1gid VARCHAR COLLATE NOCASE, level1name VARCHAR COLLATE NOCASE, level2gid VARCHAR COLLATE NOCASE, level2name VARCHAR COLLATE NOCASE, level3gid VARCHAR COLLATE NOCASE, level3name VARCHAR COLLATE NOCASE, iucnredlistcategory VARCHAR COLLATE NOCASE);
CREATE TABLE observations(gbifid BIGINT,eventdate TIMESTAMP, decimallatitude DOUBLE, decimallongitude DOUBLE, coordinateuncertaintyinmeters DOUBLE, phylum VARCHAR COLLATE NOCASE, _class VARCHAR COLLATE NOCASE, _order VARCHAR COLLATE NOCASE, _family VARCHAR COLLATE NOCASE, subfamily VARCHAR COLLATE NOCASE, genus VARCHAR COLLATE NOCASE, subgenus VARCHAR COLLATE NOCASE, kingdomkey INTEGER, phylumkey INTEGER, classkey INTEGER, orderkey INTEGER, familykey INTEGER, genuskey INTEGER, subgenuskey VARCHAR COLLATE NOCASE, specieskey INTEGER, species VARCHAR COLLATE NOCASE);
CREATE TABLE geo_kg(gbifid BIGINT, kg INTEGER);
CREATE TABLE geo_gelu(gbifid BIGINT, elu INTEGER);
CREATE TABLE elu_values(eluid INTEGER, count INTEGER, red INTEGER, green INTEGER, blue INTEGER, class1 VARCHAR COLLATE NOCASE, class2 VARCHAR COLLATE NOCASE, class3 VARCHAR COLLATE NOCASE);
CREATE TABLE trainingspecies(specieskey INTEGER, version FLOAT);

.mode csv
.import 'dbs/db-backup/elu.csv' elu
SELECT COUNT(*) FROM elu;
.import 'dbs/db-backup/categorized.csv' categorized
SELECT COUNT(*) FROM categorized;
.import 'dbs/db-backup/errors.csv' errors
SELECT COUNT(*) FROM errors;
.import 'dbs/db-backup/converted.csv' converted
SELECT COUNT(*) FROM converted;
.import 'dbs/db-backup/ignoredimages.csv' ignoredimages
SELECT COUNT(*) FROM ignoredimages;
.import 'dbs/db-backup/multimedia.csv' multimedia
SELECT COUNT(*) FROM multimedia;
.import 'dbs/db-backup/occurrence.csv' occurrence
SELECT COUNT(*) FROM occurrence;
.import 'dbs/db-backup/geo_kg.csv' geo_kg
SELECT COUNT(*) FROM geo_kg;
.import 'dbs/db-backup/geo_gelu.csv' geo_gelu
SELECT COUNT(*) FROM geo_gelu;
.import 'dbs/db-backup/elu_values.csv' elu_values
SELECT COUNT(*) FROM elu_values;

INSERT INTO observations(gbifid, eventdate, decimallatitude, decimallongitude, coordinateuncertaintyinmeters, phylum, _class, _order, _family, subfamily, genus, subgenus, kingdomkey, phylumkey, classkey, orderkey, familykey, genuskey, subgenuskey, specieskey, species)
SELECT gbifid, NULLIF(eventdate, ''), NULLIF(decimallatitude, ''), NULLIF(decimallongitude, ''), NULLIF(coordinateuncertaintyinmeters, ''), NULLIF(phylum, ''), NULLIF(_class, ''), NULLIF(_order, ''), NULLIF(_family, ''), NULLIF(subfamily, ''), NULLIF(genus, ''), NULLIF(subgenus, ''), NULLIF(kingdomkey, ''), NULLIF(phylumkey, ''), NULLIF(classkey, ''), NULLIF(orderkey, ''), NULLIF(familykey, ''), NULLIF(genuskey, ''), NULLIF(subgenuskey, ''), NULLIF(specieskey, ''), NULLIF(species, '')
FROM occurrence;
SELECT COUNT(*) FROM observations;
DROP TABLE occurrence;


